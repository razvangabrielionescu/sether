<div>
    <h2>
        <span jhiTranslate="spongeApp.project.home.title">Projects</span>
        <button class="btn btn-primary float-right create-project-portia button-margin" (click)="openWebUi()">
            <span class="fa fa-plus"></span>
            <span  jhiTranslate="spongeApp.project.home.portiaButtonLabel">
            New Web Project
            </span>
        </button>
        <button class="btn btn-primary float-right create-project-fileSystem button-margin"
                [routerLink]="['/', { outlets: { popup: ['fileSystem-new'] } }]">
            <span class="fa fa-plus"></span>
            <span  jhiTranslate="spongeApp.project.home.fileSystemButtonLabel">
            New FileSystem Project
            </span>
        </button>
        <button class="btn btn-primary float-right create-project-social button-margin" (click)="openSocial()">
            <span class="fa fa-plus"></span>
            <span  jhiTranslate="spongeApp.project.home.socialButtonLabel">
            New Social Project
            </span>
        </button>
    </h2>
    <jhi-alert></jhi-alert>
    <div class="row">
    </div>
    <br/>

    <div class="table-responsive" *ngIf="projects">
        <table class="table">
            <thead>
            <tr>
            <th></th>
            <th><span jhiTranslate="spongeApp.project.name">Name</span></th>
            <th><span jhiTranslate="spongeApp.project.description">Description</span></th>
            <th><span jhiTranslate="spongeApp.project.status">Status</span></th>
            <th><span jhiTranslate="spongeApp.project.note">Note</span></th>
            <th><span jhiTranslate="spongeApp.project.progress">Progress</span></th>
            <th><span jhiTranslate="spongeApp.project.lastActivity">Last Activity</span></th>
            <th><span jhiTranslate="spongeApp.project.tool">Tool</span></th>
            <th></th>
            </tr>
            </thead>
            <tbody>
            <ng-template ngFor let-project [ngForOf]="projects">
                <tr>
                    <td (click)="project.show = !project.show">
                        <i class="fa fa-plus" *ngIf="!project?.show"></i>
                        <i class="fa fa-minus" *ngIf="project?.show"></i>
                    </td>
                    <td>{{project.name}}</td>
                    <td>{{project.description}}</td>
                    <td [style.color]="project.status.status == 'RUNNING' ? '#5cb85c' : project.status.status == 'STOPPED' ? '#d9534f' : '#000000'">
                        <b>{{project.status.status}}</b>
                    </td>
                    <td>{{project.status.note}}</td>
                    <td>
                        <div class="progress">
                            <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar"
                                 [attr.aria-valuenow]="(project.status.progress * 10000) / 100" aria-valuemin="0" aria-valuemax ="100"
                                 [style.width]="(project.status.progress * 10000) / 100 + '%'">
                                {{(project.status.progress * 10000) / 100 | number : '1.0-0'}}%
                            </div>
                        </div>
                    </td>
                    <td>{{project.status.lastActivity}}</td>
                    <td>{{project.tool}}</td>
                    <td class="text-right">
                        <div class="btn-group flex-btn-group-container">
                            <button *ngIf="project.status.status !== 'RUNNING' && project.status.status !== 'STOPPING' && project.status.status !== 'STARTING'" class="btn btn-success btn-sm" (click)="startProject(project)">
                                <span class="fa fa-play"></span>
                                <span class="hidden-md-down" jhiTranslate="spongeApp.project.home.play">Run</span>
                            </button>
                            <button *ngIf="project.status.status === 'RUNNING'" class="btn btn-danger btn-sm" (click)="stopProject(project)">
                                <span class="fa fa-stop"></span>
                                <span class="hidden-md-down" jhiTranslate="spongeApp.project.home.stop">Stop</span>
                            </button>
                            <button type="submit"
                                    [routerLink]="['../project', project.id ]"
                                    class="btn btn-info btn-sm">
                                <span class="fa fa-eye"></span>
                                <span class="hidden-md-down" jhiTranslate="entity.action.view">View</span>
                            </button>
                        </div>
                    </td>
                </tr>
                <tr *ngIf="project?.spiders.length > 0 && project?.show">
                    <td colspan="5">
                        <table class="table">
                            <tr [id]="project.id" *ngFor="let spider of project.spiders ;trackBy: trackId">
                                <td style="width:50px;"><i class="fa fa-bug"></i></td>
                                <td>{{spider.name}}</td>
                                <td [style.color]="spider.status.status == 'RUNNING' ? '#5cb85c' : spider.status.status == 'STOPPED' ? '#d9534f' : '#000000'">
                                    <b>{{spider.status.status}}</b>
                                </td>
                                <td>
                                    <div class="progress">
                                        <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar"
                                             [attr.aria-valuenow]="(spider.status.progress * 10000) / 100" aria-valuemin="0" aria-valuemax ="100"
                                             [style.width]="(spider.status.progress * 10000) / 100 + '%'">
                                            {{(spider.status.progress * 10000) / 100 | number : '1.0-0'}}%
                                        </div>
                                    </div>
                                </td>
                                <td>{{spider.status.note}}</td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </ng-template>

            </tbody>
        </table>
    </div>
</div>
