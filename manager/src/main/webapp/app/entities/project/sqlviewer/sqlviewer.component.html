<div>
    <h2>
        <span jhiTranslate="global.menu.entities.sqlviewer">SQL Viewer</span>
    </h2>
    <jhi-alert></jhi-alert>
    <div class="row">
    </div>

    <button type="submit"
            (click)="previousState()"
            class="btn btn-info btn-sm float-right">
        <span class="fa fa-arrow-left"></span>&nbsp;<span jhiTranslate="entity.action.back"> Back</span>
    </button>

    <button *ngIf="tableData" type="submit"
            (click)="refresh()"
            class="btn btn-success btn-sm float-right">
        <span class="fa fa-refresh"></span>&nbsp;<span jhiTranslate="entity.action.refresh"> Refresh</span>
    </button>
    <i *ngIf="refreshing" class="fa fa-refresh float-right refresh-icon"></i>

    <br/>
    <label class="form-control-label" jhiTranslate="spongeApp.project.table"
           for="field-tables">Table</label>
    <select class="form-control" [(ngModel)]="selectedCommiterConfigId" name="tables" id="field-tables" required
            (change)="tableSelected($event.target.value)">
        <option *ngFor="let table of tableInfo?.tableNames" value={{table}}>
            {{table}}
        </option>
    </select>
    <br/>
    <div *ngIf="tableData"><span jhiTranslate="total">Number of records: </span>{{ tableData.rows.length }}</div>
    <div class="table-responsive" *ngIf="tableData">
        <table class="table">
            <thead>
            <tr>
                <th *ngFor="let column of tableData?.columns" class="pointer" (click)="sort(column)">
                    <span>{{column}} </span>
                    <i class="fa"
                       [ngClass]="{'fa-sort': scolumn != column,
                        'fa-sort-asc': (scolumn == column && !isDesc),
                        'fa-sort-desc': (scolumn == column && isDesc) }"
                       aria-hidden="true"> </i>
                </th>
            </tr>
            </thead>
            <tbody>
                <ng-template ngFor let-tableRow [ngForOf]="pagedItems">
                    <tr>
                        <td *ngFor="let tableCell of tableRow?.columnData">{{tableCell.summary}}
                            <span class="pointer more" (click)="more(tableCell)">[...]</span>
                        </td>
                    </tr>
                </ng-template>
            </tbody>
        </table>
    </div>

    <div class="container text-center" *ngIf="tableData">
        <ul *ngIf="pager.pages && pager.pages.length" class="pagination">
            <li [ngClass]="{disabled:pager.currentPage === 1}">
                <a (click)="setPage(1)">First</a>
            </li>
            <li [ngClass]="{disabled:pager.currentPage === 1}">
                <a (click)="setPage(pager.currentPage - 1)">Previous</a>
            </li>
            <li *ngFor="let page of pager.pages" [ngClass]="{active:pager.currentPage === page}">
                <a (click)="setPage(page)">{{page}}</a>
            </li>
            <li [ngClass]="{disabled:pager.currentPage === pager.totalPages}">
                <a (click)="setPage(pager.currentPage + 1)">Next</a>
            </li>
            <li [ngClass]="{disabled:pager.currentPage === pager.totalPages}">
                <a (click)="setPage(pager.totalPages)">Last</a>
            </li>
        </ul>
    </div>
</div>